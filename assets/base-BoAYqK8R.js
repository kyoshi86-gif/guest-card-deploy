import{createClient as o}from"https://esm.sh/@supabase/supabase-js";const s="https://drdflrzsvfakdnhqniaa.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRyZGZscnpzdmZha2RuaHFuaWFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1ODY5MDAsImV4cCI6MjA3MTE2MjkwMH0.I88GG5xoPsO0h5oXBxPt58rfuxIqNp7zQS7jvexXss8",a=(window.__supabase||(window.__supabase=o(s,i)),window.__supabase),n=3600*1e3;async function u(){const{data:e}=await a.auth.getSession();if(!e.session)return window.location.href="/login.html",Promise.reject("Not logged in");const t=localStorage.getItem("login_time");t?Date.now()-parseInt(t,10)>n&&l(!0):localStorage.setItem("login_time",Date.now())}async function l(e=!1){await a.auth.signOut(),localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("login_time"),e&&alert("Anda telah logout"),window.location.href="login.html"}a.auth.onAuthStateChange((e,t)=>{t||(localStorage.removeItem("login_time"),window.location.href="login.html")});export{u as c,l,a as s};
